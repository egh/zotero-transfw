{
    "translatorID"   : "ddf4ab4f-1c94-4196-900a-7a23a31df417",
    "translatorType" : 4,
    "label"          : "Digital Humanities Quarterly",
    "creator"        : "Erik Hetzner, based on work by Michael Berkowitz",
    "target"         : "http://www.digitalhumanities.org/",
    "minVersion"     : "2.0",
    "maxVersion"     : "",
    "priority"       : 100,
    "inRepository"   : true,
    "lastUpdated"    : "2009-01-08 08:19:07"
}

@framework@

function mkScraper (itemType) {
  if (itemType == "journalArticle") {
    return new Scraper ({
      title            : new Xpath('//h1[@class="articleTitle"]').first(),
      itemType         : 'journalArticle',
      publicationTitle : "Digital Humanities Quarterly",
      date             : new Xpath("//div[@id=\"pubInfo\"]").match(/(.*)Volume\s+\d+\s+Number\s+\d+/).first(),
      volume           : new Xpath("//div[@id=\"pubInfo\"]").match(/.*Volume\s+(\d+)\s+Number\s+\d+/).first(),
      issue            : new Xpath("//div[@id=\"pubInfo\"]").match(/.*Volume\s+\d+\s+Number\s+(\d+)/).first(),
      creators         : new Xpath('//div[@class="author"]/a[1]').cleanAuthor("author"),
      attachments      : function (doc, url) { return [{ url: url, title:"DHQ Snapshot", mimeType:"text/html" }]; }
    });
  } else if (itemType == "multiple") {
    return new MultiScraper({
      itemTrans : mkScraper("journalArticle"),
      items     : new Xpath('//div[@id="mainContent"]/div/p/a').raw()
    });
  }
}

function detectWeb(doc, url) {
  if (new Xpath('//div[@class="DHQarticle"]').evaluate(doc)) {
      return "journalArticle";
  } else if (new Xpath('//div[@id="mainContent"]/div/p').evaluate(doc)) {
      return "multiple";
  } else {
      return undefined;
  }
}
